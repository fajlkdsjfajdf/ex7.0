{% extends "admin_base.html" %}

{% block title %}代理管理{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-shield-alt"></i> 代理管理</h1>
    <p class="page-subtitle">配置国内代理和国外代理列表</p>
</div>

<!-- 国内代理配置 -->
<section class="dashboard-section">
    <h2 class="section-title">
        <i class="fas fa-globe-asia"></i> 国内代理
    </h2>

    <form id="domesticProxyForm" class="config-form">
        <div id="domesticProxyList">
            <!-- 代理列表将通过JavaScript动态加载 -->
        </div>

        <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="addDomesticProxy()">
                <i class="fas fa-plus"></i> 添加代理
            </button>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> 保存配置
            </button>
        </div>
    </form>
</section>

<!-- 国外代理配置 -->
<section class="dashboard-section">
    <h2 class="section-title">
        <i class="fas fa-globe-americas"></i> 国外代理
    </h2>

    <form id="foreignProxyForm" class="config-form">
        <div id="foreignProxyList">
            <!-- 代理列表将通过JavaScript动态加载 -->
        </div>

        <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="addForeignProxy()">
                <i class="fas fa-plus"></i> 添加代理
            </button>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> 保存配置
            </button>
        </div>
    </form>
</section>

<!-- 代理配置模板 -->
<template id="proxyItemTemplate">
    <div class="proxy-item" data-proxy-id="">
        <div class="proxy-item-header">
            <span class="proxy-item-title">代理服务器</span>
            <div class="proxy-item-actions">
                <button type="button" class="btn btn-sm btn-info" onclick="testProxy(this)">
                    <i class="fas fa-vial"></i> 测试
                </button>
                <button type="button" class="btn btn-sm btn-danger" onclick="removeProxy(this)">
                    <i class="fas fa-trash"></i> 删除
                </button>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">代理类型</label>
                <select class="form-input proxy-type" required>
                    <option value="http">HTTP</option>
                    <option value="https">HTTPS</option>
                    <option value="socks5">SOCKS5</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">代理地址</label>
                <input type="text" class="form-input proxy-host" placeholder="127.0.0.1" required>
            </div>

            <div class="form-group">
                <label class="form-label">代理端口</label>
                <input type="number" class="form-input proxy-port" placeholder="7890" min="1" max="65535" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label">用户名（可选）</label>
                <input type="text" class="form-input proxy-username" placeholder="">
            </div>

            <div class="form-group">
                <label class="form-label">密码（可选）</label>
                <input type="password" class="form-input proxy-password" placeholder="">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label">负载均衡占比</label>
                <input type="number" class="form-input proxy-weight" value="1" min="1" max="100" required>
                <small class="form-help">值越大，使用频率越高</small>
            </div>

            <div class="form-group">
                <label class="form-label">IPv6支持</label>
                <select class="form-input proxy-ipv6">
                    <option value="auto">自动检测</option>
                    <option value="yes">仅IPv6</option>
                    <option value="no">仅IPv4</option>
                </select>
                <small class="form-help">选择代理支持的IP版本</small>
            </div>
        </div>
    </div>
</template>
{% endblock %}

{% block extra_js %}
<script src="/static/common/js/admin-proxy.js"></script>
{% endblock %}
